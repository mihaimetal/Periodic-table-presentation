(function(){$.easing.easeOutBounce=function(f,g,h,i,d){return(g/=d)<1/2.75?i*7.5625*g*g+h:g<2/2.75?i*(7.5625*(g-=1.5/2.75)*g+0.75)+h:g<2.5/2.75?i*(7.5625*(g-=2.25/2.75)*g+0.9375)+h:i*(7.5625*(g-=2.625/2.75)*g+0.984375)+h};$.easing.easeInBounce=function(f,g,h,i,d){return i-$.easing.easeOutBounce(f,d-g,0,i,d)+h};$.easing.easeInOutBounce=function(f,g,h,i,d){if(g<d/2)return $.easing.easeInBounce(f,g*2,0,i,d)*0.5+h;return $.easing.easeOutBounce(f,g*2-d,0,i,d)*0.5+i*0.5+h}})();
var app=function(){var f={},g=[],h=!0,i=!1,d=function(b,a){return Math.round(Math.random()*(a-b+1))+b},c=null,n=function(b){$("#thetable");$.ajax({type:"GET",url:"res/periodic.xml",dataType:"xml",success:function(a){$(a).find("ATOM").each(function(){var a=parseInt($(this).find("ATOMIC_NUMBER").text());f["a"+a]={};f["a"+a].elem={};f["a"+a].info={};var j="<table>";$(this).children().each(function(){var a=this.tagName;a=a.replace(/_/g," ");a=a.toLowerCase();a=a.charAt(0).toUpperCase()+a.slice(1);var b=
$(this).text();b=$.trim(b);var e=$(this).attr("UNITS");e&&(b+=" "+e);j+="<tr><td>"+a+"<td>"+b+"</td></tr>"});j+="</table>";f["a"+a].info=j;var e=0;a>=2&&(e+=16);a>=5&&(e+=10);a>=13&&(e+=10);a>56&&(e-=14);a>88&&(e-=14);a>56&&a<72&&(e+=68);a>88&&a<104&&(e+=68);var g=(a-1+e)%18;e=Math.floor((a-1+e)/18);var c={alkalimetals:{pos:[[0,1,1,6]],col:"#dc143c"},alkalineearthmetals:{pos:[[1,1,1,6]],col:"#ffe4b5"},lanthanides:{pos:[[2,8,15,1]],col:"#ffc0cb"},actinides:{pos:[[2,9,15,1]],col:"#ee82ee"},transitionmetals:{pos:[[2,
3,10,1],[2,4,10,1],[3,5,9,1],[3,6,5,1],[11,6,1,1]],col:"#ff69b4"},posttransitionmetals:{pos:[[12,2,1,4],[13,4,1,2],[14,5,1,1]],col:"#4169e1"},metalloids:{pos:[[12,1,1,1],[13,2,1,2],[14,3,1,2],[15,4,1,2]],col:"#bdb76b"},othernonmetals:{pos:[[0,0,1,1],[13,1,1,1],[14,1,1,2],[15,1,1,3]],col:"#98fb98"},halogens:{pos:[[16,1,1,5]],col:"#f0e68c"},noblegases:{pos:[[17,0,1,6]],col:"#b0e0e6"}},h="#a9a9a9",d;for(d in c)for(var i in c[d].pos)for(var k=0;k<c[d].pos[i][2];k++)for(var l=0;l<c[d].pos[i][3];l++){var m=
c[d].pos[i][1]+l;if(g===c[d].pos[i][0]+k&&e===m)h=c[d].col}f["a"+a].elem.x=g;f["a"+a].elem.y=e;f["a"+a].elem.backcol=h;f["a"+a].elem.an=a;f["a"+a].elem.sym=$(this).find("SYMBOL").text();f["a"+a].elem.name=$(this).find("NAME").text();b.resolve()});a={"113":{name:"Ununtrium",sym:"Uut"},"114":{name:"Ununquadium",sym:"Uuq"},"115":{name:"Ununpentium",sym:"Uup"},"116":{name:"Ununhexium",sym:"Uuh"},"117":{name:"Ununseptium",sym:"Uus"},"118":{name:"Ununoctium",sym:"Uuo"}};for(var e in a){var j=e;f["a"+j]=
{};f["a"+j].elem={x:(j-1+8)%18,y:Math.floor((j-1+8)/18),backcol:"#a9a9a9",an:j,sym:a[e].sym,name:a[e].name};f["a"+j].info="<table><tr><td>Name<td>"+a[e].name+"</td></tr><tr><td>Symbol<td>"+a[e].sym+"</td></tr><tr><td>Atomic number<td>"+j+"</td></tr></table>"}}})},o=function(b){soundManager.flashVersion=9;soundManager.preferFlash=!0;soundManager.url="lib/";soundManager.onready(function(){c=soundManager.createSound({id:"podcast",url:"res/99percentInvisible_PeriodicTable.mp3",autoLoad:!0,volume:79,onload:function(){c.onposition(28E3,
function(){h&&$("#blackboard").position().top!==8&&$("#blackboard").animate({top:8},1E3)});c.onposition(3E4,function(){h&&($("#blackboard").find("p").remove(),k("The periodic table of the elements",{left:!0}),k("- there are 118 known elements;",{top:!0}),k("- elements with similar properties are on the same column;"))});c.onposition(113E3,function(){h&&($("#blackboard").find("p").remove(),k("Dmitri Mendeleev (1834 - 1907)",{left:!0}),k("- best design for a table of the chemical elements;",{top:!0}),
k("- left gaps for future elements;"),k("- could predict the properties of the undiscovered elements;"))});c.onposition(134E3,function(){if(h)for(var a=0;a<15;a++){var b=d(1,100);$("#a"+b).fadeOut(3E3).delay(3E3).fadeIn(3E3)}});c.onposition(165E3,function(){h&&$("#a31").fadeOut(3E3).delay(3E3).fadeIn(3E3)});c.onposition(254E3,function(){h&&$("#a117").fadeOut(3E3).delay(3E3).fadeIn(3E3)});$(window).blur(function(){c.paused||(i=!0,$("#tube-plug").animate({top:$("#tube-plug").position().top===-100?-20:
-100}),c.pause())});$(window).focus(function(){c.paused&&i&&(i=!1,$("#tube-plug").animate({top:$("#tube-plug").position().top===-100?-20:-100}),c.resume())});c.play({whileplaying:function(){l(c)}});b.resolve()},onfinish:function(){c.play({whileplaying:function(){l(c)}});l(c,!0)}})})},l=function(b,a){if(b.position%5E3>4900||a){var e=b.position*100/b.duration/100*200;$("#tube1").find(".tube-liquid").animate({height:Math.round(e)+30})}},k=function(b,a){a=a||{};$("#blackboard").position().top!==8&&$("#blackboard").animate({top:8},
1E3);for(var e=$("#blackboard"),c=$("<p style='margin: "+(a.top?10:0)+"px 0 0 "+(a.left?50:0)+"px;'></p>").appendTo(e),d=1;d<=b.length;d++)(function(a,c){var d=b.substr(0,a-1)+"<span style='display:none;'>"+b.substr(a-1,1)+"</span>";e.queue(function(){c.html(d);e.dequeue()});e.queue(function(){c.find("span").fadeIn(180,function(){e.dequeue()})})})(d,c)},p=function(){for(var b=0;b<8;b++){var a=$("<div class='bubble' id='bubble"+b+"'></div>");a.appendTo("#tube1");(function(a){setTimeout(function(){m(a)},
d(100,3E3))})(a)}},m=function(b){var a=d(15,45),e=d(5,10),c=d(5,15);b.css({left:a,bottom:e,width:c,height:c});b.css({background:"#ffe4e1","border-radius":Math.round(c/2),opacity:"0.8"});b.css({background:"-webkit-gradient(radial, 20% 20%, 1, center center, "+Math.round(c/2)+", from(rgba(255,255,255,0.9)), color-stop(70%, rgba(255,255,255,0)), color-stop(99%, rgba(255,255,255,0.8)), to(rgba(255,255,255,0)))"});b.css({background:"-moz-radial-gradient(top left, rgba(255,255,255,0.8), rgba(255,255,255,0))"});
b.animate({left:d(15,45),bottom:$("#tube1 .tube-liquid").height()},{duration:9E3+d(500,5E3),specialEasing:{left:Math.random()>0.5?"easeInBounce":"easeOutBounce"},complete:function(){setTimeout(function(){m(b)},d(300,2E3))}})},q=function(){$("#testtubes").find("div.tube").each(function(){for(var b=0;b<9;b++){var a=b%2===0?16:6,c=b%2===0?"<span>"+(b+1-b/2)+"</span>":"",d="",f="";$(this).attr("id")==="tube2"&&(d="id='vol"+(b+1)*10+"' ",f="cursor:pointer;");$(this).append("<div "+d+"class='grad' style='bottom:"+
(b*25+30)+"px;left:13px;width:"+a+"px;"+f+"'>"+c+"</div>")}});o(g[0]=$.Deferred());n(g[1]=$.Deferred());$("#tube2").find(".grad").click(function(){var b=parseInt(this.id.substr(3));c.setVolume(b);var a="liquid-vol1";b===80?a="liquid-vol2":b===90&&(a="liquid-vol3");$("#tube2").find(".tube-liquid").removeClass("liquid-vol1 liquid-vol2 liquid-vol3").addClass(a).animate({height:parseInt($(this).css("bottom"))})});$("#tube-plug").click(function(){var b=$(this);if(!b.is(":animated")){var a=b.position().top===
-100;a?c.pause():c.resume();b.animate({top:a?-20:-100})}});$.when.apply(null,g).done(function(){$("#loading").remove();$("#periodictable").fadeIn();var b=[],a=0,d;for(d in f)(function(a,b){$("#thetable").queue(function(){var c=$("<div class='tile' id='a"+a.elem.an+"' style='left:"+a.elem.x*42+"px;top:0px;background:"+a.elem.backcol+";'>"+a.elem.an+"<p>"+a.elem.sym+"</p>"+a.elem.name+"</div>");$("#thetable").append(c);c.animate({top:a.elem.y*42},150,"linear",function(){$("#thetable").dequeue();b.resolve()})})})(f[d],
b[a]=$.Deferred()),a++;$.when.apply(null,b).done(function(){$("#thetable").append("<div class='tile no-hover' style='left:84px;top:210px;background:transparent;text-align:center;font-size:16px;line-height:40px;'>*</div>");$("#thetable").append("<div class='tile no-hover' style='left:84px;top:252px;background:transparent;text-align:center;font-size:16px;line-height:40px;'>**</div>");$("#thetable").append("<div class='tile no-hover' style='left:46px;top:336px;background:transparent;text-align:center;font-size:16px;line-height:40px;'>*</div>");
$("#thetable").append("<div class='tile no-hover' style='left:46px;top:378px;background:transparent;text-align:center;font-size:16px;line-height:40px;'>**</div>");$("#thetable").find(".tile").find("p").click(function(){window.open("http://en.wikipedia.org/wiki/"+f[$(this).parent()[0].id].elem.name)});$("#tube1").find(".tube-mark").fadeIn().click(function(){h=!1;setTimeout(function(){h=!0},500);$("#blackboard").clearQueue().find("p").remove();c.setPosition(parseInt(this.id.substr(2)));l(c,!0)});$("#thetable").find(".tile").hover(function(){$(this).hasClass("no-hover")||
($(this).find("p").css({color:"lime"}),$("#element-info").css({left:f[this.id].elem.x>8?0:"auto",right:f[this.id].elem.x>8?"auto":0}).html(f[this.id].info).show())},function(){$(this).hasClass("no-hover")||($(this).find("p").css({color:"#ffd700"}),$("#element-info").hide())});p()})})};return{start:function(){q()}}}();

(function(){$.easing.easeOutBounce=function(e,f,c,g,h){return(f/=h)<1/2.75?g*7.5625*f*f+c:f<2/2.75?g*(7.5625*(f-=1.5/2.75)*f+0.75)+c:f<2.5/2.75?g*(7.5625*(f-=2.25/2.75)*f+0.9375)+c:g*(7.5625*(f-=2.625/2.75)*f+0.984375)+c};$.easing.easeInBounce=function(e,f,c,g,h){return g-$.easing.easeOutBounce(e,h-f,0,g,h)+c};$.easing.easeInOutBounce=function(e,f,c,g,h){if(f<h/2)return $.easing.easeInBounce(e,f*2,0,g,h)*0.5+c;return $.easing.easeOutBounce(e,f*2-h,0,g,h)*0.5+g*0.5+c}})();
var app=function(){var e={},f=[],c=!0,g=!1,h=function(b,a){return Math.round(Math.random()*(a-b+1))+b},j=null,n=function(b){$("#thetable");$.ajax({type:"GET",url:"res/periodic.xml",dataType:"xml",success:function(a){$(a).find("ATOM").each(function(){var a=parseInt($(this).find("ATOMIC_NUMBER").text());e["a"+a]={};e["a"+a].elem={};e["a"+a].info={};var i="<table>";$(this).children().each(function(){var a=this.tagName;a=a.replace(/_/g," ");a=a.toLowerCase();a=a.charAt(0).toUpperCase()+a.slice(1);var b=
$(this).text();b=$.trim(b);var d=$(this).attr("UNITS");d&&(b+=" "+d);i+="<tr><td>"+a+"<td>"+b+"</td></tr>"});i+="</table>";e["a"+a].info=i;var d=0;a>=2&&(d+=16);a>=5&&(d+=10);a>=13&&(d+=10);a>56&&(d-=14);a>88&&(d-=14);a>56&&a<72&&(d+=68);a>88&&a<104&&(d+=68);var f=(a-1+d)%18;d=Math.floor((a-1+d)/18);var c={alkalimetals:{pos:[[0,1,1,6]],col:"#dc143c"},alkalineearthmetals:{pos:[[1,1,1,6]],col:"#ffe4b5"},lanthanides:{pos:[[2,8,15,1]],col:"#ffc0cb"},actinides:{pos:[[2,9,15,1]],col:"#ee82ee"},transitionmetals:{pos:[[2,
3,10,1],[2,4,10,1],[3,5,9,1],[3,6,5,1],[11,6,1,1]],col:"#ff69b4"},posttransitionmetals:{pos:[[12,2,1,4],[13,4,1,2],[14,5,1,1]],col:"#4169e1"},metalloids:{pos:[[12,1,1,1],[13,2,1,2],[14,3,1,2],[15,4,1,2]],col:"#bdb76b"},othernonmetals:{pos:[[0,0,1,1],[13,1,1,1],[14,1,1,2],[15,1,1,3]],col:"#98fb98"},halogens:{pos:[[16,1,1,5]],col:"#f0e68c"},noblegases:{pos:[[17,0,1,6]],col:"#b0e0e6"}},h="#a9a9a9",g;for(g in c)for(var j in c[g].pos)for(var k=0;k<c[g].pos[j][2];k++)for(var l=0;l<c[g].pos[j][3];l++){var m=
c[g].pos[j][1]+l;if(f===c[g].pos[j][0]+k&&d===m)h=c[g].col}e["a"+a].elem.x=f;e["a"+a].elem.y=d;e["a"+a].elem.backcol=h;e["a"+a].elem.an=a;e["a"+a].elem.sym=$(this).find("SYMBOL").text();e["a"+a].elem.name=$(this).find("NAME").text();b.resolve()});a={"113":{name:"Ununtrium",sym:"Uut"},"114":{name:"Ununquadium",sym:"Uuq"},"115":{name:"Ununpentium",sym:"Uup"},"116":{name:"Ununhexium",sym:"Uuh"},"117":{name:"Ununseptium",sym:"Uus"},"118":{name:"Ununoctium",sym:"Uuo"}};for(var d in a){var i=d;e["a"+i]=
{};e["a"+i].elem={x:(i-1+8)%18,y:Math.floor((i-1+8)/18),backcol:"#a9a9a9",an:i,sym:a[d].sym,name:a[d].name};e["a"+i].info="<table><tr><td>Name<td>"+a[d].name+"</td></tr><tr><td>Symbol<td>"+a[d].sym+"</td></tr><tr><td>Atomic number<td>"+i+"</td></tr></table>"}}})},o=function(b){soundManager.url="lib/";soundManager.preferFlash=!0;soundManager.onready(function(){j=soundManager.createSound({id:"podcast",url:"res/99percentInvisible_PeriodicTable.mp3",autoLoad:!0,volume:79,onload:function(){this.onposition(28E3,
function(){c&&$("#blackboard").position().top!==8&&$("#blackboard").animate({top:8},1E3)});this.onposition(3E4,function(){c&&($("#blackboard").find("p").remove(),k("The periodic table of the elements",{left:!0}),k("- there are 118 known elements;",{top:!0}),k("- elements with similar properties are on the same column;"))});this.onposition(113E3,function(){c&&($("#blackboard").find("p").remove(),k("Dmitri Mendeleev (1834 - 1907)",{left:!0}),k("- best design for a table of the chemical elements;",{top:!0}),
k("- left gaps for future elements;"),k("- could predict the properties of the undiscovered elements;"))});this.onposition(134E3,function(){if(c)for(var a=0;a<15;a++){var b=h(1,100);$("#a"+b).fadeOut(3E3).delay(3E3).fadeIn(3E3)}});this.onposition(165E3,function(){c&&$("#a31").fadeOut(3E3).delay(3E3).fadeIn(3E3)});this.onposition(254E3,function(){c&&$("#a117").fadeOut(3E3).delay(3E3).fadeIn(3E3)});$.browser.msie?setTimeout(function(){this.play({whileplaying:function(){l(this)}})},500):($(window).blur(function(){j.paused||
(g=!0,$("#tube-plug").animate({top:$("#tube-plug").position().top===-100?-20:-100}),j.pause())}),$(window).focus(function(){j.paused&&g&&(g=!1,$("#tube-plug").animate({top:$("#tube-plug").position().top===-100?-20:-100}),j.resume())}),this.play({whileplaying:function(){l(this)}}));b.resolve()},onfinish:function(){this.play({whileplaying:function(){l(this)}});l(this,!0)}})})},l=function(b,a){if(b.position%5E3>4900||a){var d=b.position*100/b.duration/100*200;$("#tube1").find(".tube-liquid").animate({height:Math.round(d)+
30})}},k=function(b,a){a=a||{};$("#blackboard").position().top!==8&&$("#blackboard").animate({top:8},1E3);for(var d=$("#blackboard"),i=$("<p style='margin: "+(a.top?10:0)+"px 0 0 "+(a.left?50:0)+"px;'></p>").appendTo(d),c=1;c<=b.length;c++)(function(a,c){var i=b.substr(0,a-1)+"<span style='display:none;'>"+b.substr(a-1,1)+"</span>";d.queue(function(){c.html(i);d.dequeue()});d.queue(function(){c.find("span").fadeIn(180,function(){d.dequeue()})})})(c,i)},p=function(){for(var b=0;b<8;b++){var a=$("<div class='bubble' id='bubble"+
b+"'></div>");a.appendTo("#tube1");(function(a){setTimeout(function(){m(a)},h(100,3E3))})(a)}},m=function(b){var a=h(15,45),d=h(5,10),c=h(5,15);b.css({left:a,bottom:d,width:c,height:c});b.css({background:"#ffe4e1","border-radius":Math.round(c/2),opacity:"0.8"});b.css({background:"-webkit-gradient(radial, 20% 20%, 1, center center, "+Math.round(c/2)+", from(rgba(255,255,255,0.9)), color-stop(70%, rgba(255,255,255,0)), color-stop(99%, rgba(255,255,255,0.8)), to(rgba(255,255,255,0)))"});b.css({background:"-moz-radial-gradient(top left, rgba(255,255,255,0.8), rgba(255,255,255,0))"});
b.animate({left:h(15,45),bottom:$("#tube1 .tube-liquid").height()},{duration:9E3+h(500,5E3),specialEasing:{left:Math.random()>0.5?"easeInBounce":"easeOutBounce"},complete:function(){setTimeout(function(){m(b)},h(300,2E3))}})},q=function(){$("#testtubes").find("div.tube").each(function(){for(var b=0;b<9;b++){var a=b%2===0?16:6,c=b%2===0?"<span>"+(b+1-b/2)+"</span>":"",i="",e="";$(this).attr("id")==="tube2"&&(i="id='vol"+(b+1)*10+"' ",e="cursor:pointer;");$(this).append("<div "+i+"class='grad' style='bottom:"+
(b*25+30)+"px;left:13px;width:"+a+"px;"+e+"'>"+c+"</div>")}});o(f[0]=$.Deferred());n(f[1]=$.Deferred());$("#tube2").find(".grad").click(function(){var b=parseInt(this.id.substr(3));j.setVolume(b);var a="liquid-vol1";b===80?a="liquid-vol2":b===90&&(a="liquid-vol3");$("#tube2").find(".tube-liquid").removeClass("liquid-vol1 liquid-vol2 liquid-vol3").addClass(a).animate({height:parseInt($(this).css("bottom"))})});$("#tube-plug").click(function(){var b=$(this);if(!b.is(":animated")){var a=b.position().top===
-100;a?j.pause():j.resume();b.animate({top:a?-20:-100})}});$.when.apply(null,f).done(function(){$("#loading").remove();$("#periodictable").fadeIn();var b=[],a=0,d;for(d in e)(function(a,b){$("#thetable").queue(function(){var c=$("<div class='tile' id='a"+a.elem.an+"' style='left:"+a.elem.x*42+"px;top:0px;background:"+a.elem.backcol+";'>"+a.elem.an+"<p>"+a.elem.sym+"</p>"+a.elem.name+"</div>");$("#thetable").append(c);c.animate({top:a.elem.y*42},150,"linear",function(){$("#thetable").dequeue();b.resolve()})})})(e[d],
b[a]=$.Deferred()),a++;$.when.apply(null,b).done(function(){$("#thetable").append("<div class='tile no-hover' style='left:84px;top:210px;background:transparent;text-align:center;font-size:16px;line-height:40px;'>*</div>");$("#thetable").append("<div class='tile no-hover' style='left:84px;top:252px;background:transparent;text-align:center;font-size:16px;line-height:40px;'>**</div>");$("#thetable").append("<div class='tile no-hover' style='left:46px;top:336px;background:transparent;text-align:center;font-size:16px;line-height:40px;'>*</div>");
$("#thetable").append("<div class='tile no-hover' style='left:46px;top:378px;background:transparent;text-align:center;font-size:16px;line-height:40px;'>**</div>");$("#tube1").find(".tube-mark").fadeIn().click(function(){c=!1;setTimeout(function(){c=!0},500);$("#blackboard").clearQueue().find("p").remove();j.setPosition(parseInt(this.id.substr(2)));l(j,!0)});$("#thetable").find(".tile").hover(function(){$(this).hasClass("no-hover")||($(this).find("p").css({color:"lime"}),$("#element-info").css({left:e[this.id].elem.x>
8?0:"auto",right:e[this.id].elem.x>8?"auto":0}).html(e[this.id].info).show())},function(){$(this).hasClass("no-hover")||($(this).find("p").css({color:"#ffd700"}),$("#element-info").hide())});p()})})};return{start:function(){q()}}}();

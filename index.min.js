(function(){$.easing.easeOutBounce=function(e,f,a,h,g){if((f/=g)<(1/2.75)){return h*(7.5625*f*f)+a}else{if(f<(2/2.75)){return h*(7.5625*(f-=(1.5/2.75))*f+0.75)+a}else{if(f<(2.5/2.75)){return h*(7.5625*(f-=(2.25/2.75))*f+0.9375)+a}else{return h*(7.5625*(f-=(2.625/2.75))*f+0.984375)+a}}}};$.easing.easeInBounce=function(e,f,a,h,g){return h-$.easing.easeOutBounce(e,g-f,0,h,g)+a};$.easing.easeInOutBounce=function(e,f,a,h,g){if(f<g/2){return $.easing.easeInBounce(e,f*2,0,h,g)*0.5+a}return $.easing.easeOutBounce(e,f*2-g,0,h,g)*0.5+h*0.5+a}}());var app=(function(){var l=18,f=10;var q=40+2;var d={};var h=[],g=8;var n=[];var c=true;var k=function(s,r){return Math.round(Math.random()*(r-s+1))+s};var e=null;var p=function(s){var r=$("#thetable");$.ajax({type:"GET",url:"res/periodic.xml",dataType:"xml",success:function(u){var t;$(u).find("ATOM").each(function(){var G=parseInt($(this).find("ATOMIC_NUMBER").text());d["a"+G]={};d["a"+G].elem={};d["a"+G].info={};var z="<table>";var N="",M="";$(this).children().each(function(){var P=this.tagName;P=P.replace(/_/g," ");P=P.toLowerCase();P=P.charAt(0).toUpperCase()+P.slice(1);var O=$(this).text();O=$.trim(O);var Q=$(this).attr("UNITS");if(Q){O+=" "+Q}z+="<tr><td>"+P+"<td>"+O+"</td></tr>"});z+="</table>";d["a"+G].info=z;var D=0;if(G>=2){D+=16}if(G>=5){D+=10}if(G>=13){D+=10}if(G>56){D-=14}if(G>88){D-=14}if(G>56&&G<72){D+=68}if(G>88&&G<104){D+=68}var L=(G-1+D)%l;var K=Math.floor((G-1+D)/l);var F={alkalimetals:{pos:[[0,1,1,6]],col:"#dc143c"},alkalineearthmetals:{pos:[[1,1,1,6]],col:"#ffe4b5"},lanthanides:{pos:[[2,8,15,1]],col:"#ffc0cb"},actinides:{pos:[[2,9,15,1]],col:"#ee82ee"},transitionmetals:{pos:[[2,3,10,1],[2,4,10,1],[3,5,9,1],[3,6,5,1],[11,6,1,1]],col:"#ff69b4"},posttransitionmetals:{pos:[[12,2,1,4],[13,4,1,2],[14,5,1,1]],col:"#4169e1"},metalloids:{pos:[[12,1,1,1],[13,2,1,2],[14,3,1,2],[15,4,1,2]],col:"#bdb76b"},othernonmetals:{pos:[[0,0,1,1],[13,1,1,1],[14,1,1,2],[15,1,1,3]],col:"#98fb98"},halogens:{pos:[[16,1,1,5]],col:"#f0e68c"},noblegases:{pos:[[17,0,1,6]],col:"#b0e0e6"}};var H="#a9a9a9";for(var E in F){for(var C in F[E].pos){for(var B=0;B<F[E].pos[C][2];B++){for(var A=0;A<F[E].pos[C][3];A++){var J=F[E].pos[C][0]+B;var I=F[E].pos[C][1]+A;if(L===J&&K===I){H=F[E].col}}}}}d["a"+G].elem.x=L;d["a"+G].elem.y=K;d["a"+G].elem.backcol=H;d["a"+G].elem.an=G;d["a"+G].elem.sym=$(this).find("SYMBOL").text();d["a"+G].elem.name=$(this).find("NAME").text();s.resolve()});var x={"113":{name:"Ununtrium",sym:"Uut"},"114":{name:"Ununquadium",sym:"Uuq"},"115":{name:"Ununpentium",sym:"Uup"},"116":{name:"Ununhexium",sym:"Uuh"},"117":{name:"Ununseptium",sym:"Uus"},"118":{name:"Ununoctium",sym:"Uuo"}};var y=8;for(var v in x){var w=v;d["a"+w]={};d["a"+w].elem={x:(w-1+y)%l,y:Math.floor((w-1+y)/l),backcol:"#a9a9a9",an:w,sym:x[v].sym,name:x[v].name};d["a"+w].info="<table><tr><td>Name<td>"+x[v].name+"</td></tr><tr><td>Symbol<td>"+x[v].sym+"</td></tr><tr><td>Atomic number<td>"+w+"</td></tr></table>"}}})};var m=function(r){soundManager.url="lib/";soundManager.preferFlash=true;soundManager.onready(function(){e=soundManager.createSound({id:"podcast",url:"res/99percentInvisible_PeriodicTable.mp3",autoLoad:true,volume:79,onload:function(){this.onposition(28000,function(s){if(!c){return}if($("#blackboard").position().top!==8){$("#blackboard").animate({top:8},1000)}});this.onposition(30000,function(s){if(!c){return}$("#blackboard").empty();i("The periodic table of the elements",{left:true});i("- there are 118 known elements;",{top:true});i("- elements with similar properties are on the same column;")});this.onposition(113000,function(s){if(!c){return}$("#blackboard").empty();i("Dmitri Mendeleev (1834 - 1907)",{left:true});i("- best design for a table of the chemical elements;",{top:true});i("- left gaps for future elements;");i("- could predict the properties of the undiscovered elements;")});this.onposition(134000,function(u){if(!c){return}for(var s=0;s<15;s++){var t=k(1,100);$("#a"+t).fadeOut(3000).delay(3000).fadeIn(3000)}});this.onposition(165000,function(s){if(!c){return}$("#a31").fadeOut(3000).delay(3000).fadeIn(3000)});this.onposition(254000,function(s){if(!c){return}$("#a117").fadeOut(3000).delay(3000).fadeIn(3000)});this.play({whileplaying:function(){j(this)}});r.resolve()},onfinish:function(){this.play({whileplaying:function(){j(this)}});j(this,true)}})})};var j=function(s,r){if(s.position%5000>4900||r){var u=s.position*100/s.duration;var t=u/100*(250-30-20);$("#tube1").find(".tube-liquid").animate({height:Math.round(t)+30})}};var i=function(v,u){u=u||{};if($("#blackboard").position().top!==8){$("#blackboard").animate({top:8},1000)}var s=$("#blackboard");var t=$("<p style='margin: "+(u.top?10:0)+"px 0 0 "+(u.left?50:0)+"px;'></p>").appendTo(s);for(var r=1;r<=v.length;r++){(function(x,y){var w=v.substr(0,x-1)+"<span style='display:none;'>"+v.substr(x-1,1)+"</span>";s.queue(function(){y.html(w);s.dequeue()});s.queue(function(){y.find("span").fadeIn(180,function(){s.dequeue()})})}(r,t))}};var b=function(){for(var s=0;s<g;s++){var r=$("<div class='bubble' id='bubble"+s+"'></div>");r.appendTo("#tube1");(function(t){setTimeout(function(){o(t)},k(100,3000))}(r))}};var o=function(s){var u=k(15,45),t=k(5,10);var r=k(5,15);s.css({left:u,bottom:t,width:r,height:r});s.css({background:"#ffe4e1","border-radius":Math.round(r/2),opacity:"0.8"});s.css({background:"-webkit-gradient(radial, 20% 20%, 1, center center, "+Math.round(r/2)+", from(rgba(255,255,255,0.9)), color-stop(70%, rgba(255,255,255,0)), color-stop(99%, rgba(255,255,255,0.8)), to(rgba(255,255,255,0)))"});s.css({background:"-moz-radial-gradient(top left, rgba(255,255,255,0.8), rgba(255,255,255,0))"});s.animate({left:k(15,45),bottom:$("#tube1 .tube-liquid").height()},{duration:9000+k(500,5000),specialEasing:{left:Math.random()>0.5?"easeInBounce":"easeOutBounce"},complete:function(){setTimeout(function(){o(s)},k(300,2000))}})};var a=function(){$("#testtubes").find("div.tube").each(function(){for(var r=0;r<9;r++){var u=(r%2===0)?16:6;var t=(r%2===0)?"<span>"+((r+1)-r/2)+"</span>":"";var v="",s="";if($(this).attr("id")==="tube2"){v="id='vol"+(r+1)*10+"' ";s="cursor:pointer;"}$(this).append("<div "+v+"class='grad' style='bottom:"+(r*25+30)+"px;left:13px;width:"+u+"px;"+s+"'>"+t+"</div>")}});m(n[0]=$.Deferred());p(n[1]=$.Deferred());$("#tube2").find(".grad").click(function(r){e.setVolume(parseInt(this.id.substr(3)));$("#tube2").find(".tube-liquid").animate({height:parseInt($(this).css("bottom"))})});$("#tube-plug").click(function(){var s=$(this);if(s.is(":animated")){return}var r=(s.position().top===-100);if(r){e.pause()}else{e.resume()}s.animate({top:r?-20:-100})});$.when.apply(null,n).done(function(){$("#loading").remove();$("#periodictable").fadeIn();var s=[];var t=0;for(var r in d){(function(v,u){$("#thetable").queue(function(){var w=$("<div class='tile' id='a"+v.elem.an+"' style='left:"+v.elem.x*q+"px;top:0px;background:"+v.elem.backcol+";'>"+v.elem.an+"<p>"+v.elem.sym+"</p>"+v.elem.name+"</div>");$("#thetable").append(w);w.animate({top:v.elem.y*q},150,"linear",function(){$("#thetable").dequeue();u.resolve()})})}(d[r],s[t]=$.Deferred()));t++}$.when.apply(null,s).done(function(){$("#thetable").append("<div class='tile no-hover' style='left:84px;top:210px;background:transparent;text-align:center;font-size:16px;line-height:40px;'>*</div>");$("#thetable").append("<div class='tile no-hover' style='left:84px;top:252px;background:transparent;text-align:center;font-size:16px;line-height:40px;'>**</div>");$("#thetable").append("<div class='tile no-hover' style='left:46px;top:336px;background:transparent;text-align:center;font-size:16px;line-height:40px;'>*</div>");$("#thetable").append("<div class='tile no-hover' style='left:46px;top:378px;background:transparent;text-align:center;font-size:16px;line-height:40px;'>**</div>");$("#tube1").find(".tube-mark").fadeIn().click(function(){c=false;setTimeout(function(){c=true},500);$("#blackboard").clearQueue().empty();e.setPosition(parseInt(this.id.substr(2)));j(e,true)});$("#thetable").find(".tile").hover(function(u){if($(this).hasClass("no-hover")){return}$(this).find("p").css({color:"lime"});$("#element-info").css({left:d[this.id].elem.x>8?0:"auto",right:d[this.id].elem.x>8?"auto":0}).html(d[this.id].info).show()},function(){if($(this).hasClass("no-hover")){return}$(this).find("p").css({color:"#ffd700"});$("#element-info").hide()});b()})})};return{start:function(){a()}}}());
(function(){$.easing.easeOutBounce=function(e,f,h,c,g){return(f/=g)<1/2.75?c*7.5625*f*f+h:f<2/2.75?c*(7.5625*(f-=1.5/2.75)*f+0.75)+h:f<2.5/2.75?c*(7.5625*(f-=2.25/2.75)*f+0.9375)+h:c*(7.5625*(f-=2.625/2.75)*f+0.984375)+h};$.easing.easeInBounce=function(e,f,h,c,g){return c-$.easing.easeOutBounce(e,g-f,0,c,g)+h};$.easing.easeInOutBounce=function(e,f,h,c,g){if(f<g/2)return $.easing.easeInBounce(e,f*2,0,c,g)*0.5+h;return $.easing.easeOutBounce(e,f*2-g,0,c,g)*0.5+c*0.5+h}})();
var app=function(){var e={},f=[],h=!0,c=function(b,a){return Math.round(Math.random()*(a-b+1))+b},g=null,n=function(b){$("#thetable");$.ajax({type:"GET",url:"periodic.xml",dataType:"xml",success:function(a){$(a).find("ATOM").each(function(){var a=parseInt($(this).find("ATOMIC_NUMBER").text());e["a"+a]={};e["a"+a].elem={};e["a"+a].info={};var i="<table>";$(this).children().each(function(){var a=this.tagName;a=a.replace(/_/g," ");a=a.toLowerCase();a=a.charAt(0).toUpperCase()+a.slice(1);var b=$(this).text();
b=$.trim(b);var d=$(this).attr("UNITS");d&&(b+=" "+d);i+="<tr><td>"+a+"<td>"+b+"</td></tr>"});i+="</table>";e["a"+a].info=i;var d=0;a>=2&&(d+=16);a>=5&&(d+=10);a>=13&&(d+=10);a>56&&(d-=14);a>88&&(d-=14);a>56&&a<72&&(d+=68);a>88&&a<104&&(d+=68);var f=(a-1+d)%18;d=Math.floor((a-1+d)/18);var c={alkalimetals:{pos:[[0,1,1,6]],col:"#dc143c"},alkalineearthmetals:{pos:[[1,1,1,6]],col:"#ffe4b5"},lanthanides:{pos:[[2,8,15,1]],col:"#ffc0cb"},actinides:{pos:[[2,9,15,1]],col:"#ee82ee"},transitionmetals:{pos:[[2,
3,10,1],[2,4,10,1],[3,5,9,1],[3,6,5,1],[11,6,1,1]],col:"#ff69b4"},posttransitionmetals:{pos:[[12,2,1,4],[13,4,1,2],[14,5,1,1]],col:"#4169e1"},metalloids:{pos:[[12,1,1,1],[13,2,1,2],[14,3,1,2],[15,4,1,2]],col:"#bdb76b"},othernonmetals:{pos:[[0,0,1,1],[13,1,1,1],[14,1,1,2],[15,1,1,3]],col:"#98fb98"},halogens:{pos:[[16,1,1,5]],col:"#f0e68c"},noblegases:{pos:[[17,0,1,6]],col:"#b0e0e6"}},h="#a9a9a9",g;for(g in c)for(var j in c[g].pos)for(var k=0;k<c[g].pos[j][2];k++)for(var m=0;m<c[g].pos[j][3];m++){var l=
c[g].pos[j][1]+m;if(f===c[g].pos[j][0]+k&&d===l)h=c[g].col}e["a"+a].elem.x=f;e["a"+a].elem.y=d;e["a"+a].elem.backcol=h;e["a"+a].elem.an=a;e["a"+a].elem.sym=$(this).find("SYMBOL").text();e["a"+a].elem.name=$(this).find("NAME").text();b.resolve()});a={"113":{name:"Ununtrium",sym:"Uut"},"114":{name:"Ununquadium",sym:"Uuq"},"115":{name:"Ununpentium",sym:"Uup"},"116":{name:"Ununhexium",sym:"Uuh"},"117":{name:"Ununseptium",sym:"Uus"},"118":{name:"Ununoctium",sym:"Uuo"}};for(var d in a){var i=d;e["a"+i]=
{};e["a"+i].elem={x:(i-1+8)%18,y:Math.floor((i-1+8)/18),backcol:"#a9a9a9",an:i,sym:a[d].sym,name:a[d].name};e["a"+i].info="<table><tr><td>Name<td>"+a[d].name+"</td></tr><tr><td>Symbol<td>"+a[d].sym+"</td></tr><tr><td>Atomic number<td>"+i+"</td></tr></table>"}}})},o=function(b){soundManager.preferFlash=!0;soundManager.onready(function(){g=soundManager.createSound({id:"podcast",url:"res/99percentInvisible_PeriodicTable.mp3",autoLoad:!0,volume:79,onload:function(){this.onposition(28E3,function(){h&&
$("#blackboard").position().top!==8&&$("#blackboard").animate({top:8},1E3)});this.onposition(3E4,function(){h&&($("#blackboard").empty(),j("The periodic table of the elements",{left:!0}),j("- there are 118 known elements;",{top:!0}),j("- elements with similar properties are on the same column;"))});this.onposition(113E3,function(){h&&($("#blackboard").empty(),j("Dmitri Mendeleev (1834 - 1907)",{left:!0}),j("- best design for a table of the chemical elements;",{top:!0}),j("- left gaps for future elements;"),
j("- could predict the properties of the undiscovered elements;"))});this.onposition(134E3,function(){if(h)for(var a=0;a<15;a++){var b=c(1,100);$("#a"+b).fadeOut(3E3).delay(3E3).fadeIn(3E3)}});this.onposition(165E3,function(){h&&$("#a31").fadeOut(3E3).delay(3E3).fadeIn(3E3)});this.onposition(254E3,function(){h&&$("#a117").fadeOut(3E3).delay(3E3).fadeIn(3E3)});this.play({whileplaying:function(){k(this)}});b.resolve()},onfinish:function(){this.play({whileplaying:function(){k(this)}});k(this,!0)}})})},
k=function(b,a){if(b.position%5E3>4900||a){var d=b.position*100/b.duration/100*200;$("#tube1").find(".tube-liquid").animate({height:Math.round(d)+30})}},j=function(b,a){a=a||{};$("#blackboard").position().top!==8&&$("#blackboard").animate({top:8},1E3);for(var d=$("#blackboard"),i=$("<p style='margin: "+(a.top?10:0)+"px 0 0 "+(a.left?50:0)+"px;'></p>").appendTo(d),c=1;c<=b.length;c++)(function(a,c){var i=b.substr(0,a-1)+"<span style='display:none;'>"+b.substr(a-1,1)+"</span>";d.queue(function(){c.html(i);
d.dequeue()});d.queue(function(){c.find("span").fadeIn(180,function(){d.dequeue()})})})(c,i)},p=function(){for(var b=0;b<8;b++){var a=$("<div class='bubble' id='bubble"+b+"'></div>");a.appendTo("#tube1");(function(a){setTimeout(function(){l(a)},c(100,3E3))})(a)}},l=function(b){var a=c(15,45),d=c(5,10),i=c(5,15);b.css({left:a,bottom:d,width:i,height:i});b.css({background:"#ffe4e1","border-radius":Math.round(i/2),opacity:"0.8"});b.css({background:"-webkit-gradient(radial, 20% 20%, 1, center center, "+
Math.round(i/2)+", from(rgba(255,255,255,0.9)), color-stop(70%, rgba(255,255,255,0)), color-stop(99%, rgba(255,255,255,0.8)), to(rgba(255,255,255,0)))"});b.css({background:"-moz-radial-gradient(top left, rgba(255,255,255,0.8), rgba(255,255,255,0))"});b.animate({left:c(15,45),bottom:$("#tube1 .tube-liquid").height()},{duration:9E3+c(500,5E3),specialEasing:{left:Math.random()>0.5?"easeInBounce":"easeOutBounce"},complete:function(){setTimeout(function(){l(b)},c(300,2E3))}})},q=function(){$("#testtubes").find("div.tube").each(function(){for(var b=
0;b<9;b++){var a=b%2===0?16:6,d=b%2===0?"<span>"+(b+1-b/2)+"</span>":"",c="",e="";$(this).attr("id")==="tube2"&&(c="id='vol"+(b+1)*10+"' ",e="cursor:pointer;");$(this).append("<div "+c+"class='grad' style='bottom:"+(b*25+30)+"px;left:13px;width:"+a+"px;"+e+"'>"+d+"</div>")}});o(f[0]=$.Deferred());n(f[1]=$.Deferred());$("#tube2").find(".grad").click(function(){g.setVolume(parseInt(this.id.substr(3)));$("#tube2").find(".tube-liquid").animate({height:parseInt($(this).css("bottom"))})});$("#tube-plug").click(function(){var b=
$(this);if(!b.is(":animated")){var a=b.position().top===-100;a?g.pause():g.resume();b.animate({top:a?-20:-100})}});$.when.apply(null,f).done(function(){$("#loading").remove();$("#periodictable").fadeIn();var b=[],a=0,c;for(c in e)(function(a,b){$("#thetable").queue(function(){var c=$("<div class='tile' id='a"+a.elem.an+"' style='left:"+a.elem.x*42+"px;top:0px;background:"+a.elem.backcol+";'>"+a.elem.an+"<p>"+a.elem.sym+"</p>"+a.elem.name+"</div>");$("#thetable").append(c);c.animate({top:a.elem.y*
42},150,"linear",function(){$("#thetable").dequeue();b.resolve()})})})(e[c],b[a]=$.Deferred()),a++;$("#thetable").append("<div class='tile' style='left:84px;top:210px;background:transparent;text-align:center;font-size:16px;line-height:40px;'>*</div>");$("#thetable").append("<div class='tile' style='left:84px;top:252px;background:transparent;text-align:center;font-size:16px;line-height:40px;'>**</div>");$("#thetable").append("<div class='tile' style='left:46px;top:336px;background:transparent;text-align:center;font-size:16px;line-height:40px;'>*</div>");
$("#thetable").append("<div class='tile' style='left:46px;top:378px;background:transparent;text-align:center;font-size:16px;line-height:40px;'>**</div>");$.when.apply(null,b).done(function(){$("#tube1").find(".tube-mark").fadeIn().click(function(){h=!1;setTimeout(function(){h=!0},500);$("#blackboard").clearQueue().empty();g.setPosition(parseInt(this.id.substr(2)));k(g,!0)});$("#thetable").find(".tile").hover(function(){$(this).find("p").css({color:"lime"});$("#element-info").css({left:e[this.id].elem.x>
8?0:"auto",right:e[this.id].elem.x>8?"auto":0}).html(e[this.id].info).show()},function(){$(this).find("p").css({color:"#ffd700"});$("#element-info").hide()});p()})})};return{start:function(){q()}}}();
